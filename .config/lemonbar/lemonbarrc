#!/usr/bin/bash

clock () {
  echo -n `date "+%a %m-%d %H:%M"`
}

usedmem () {
  echo -n `free -m | awk '/Mem/ {print $3}'`
}

totalmem () {
  echo -n `free -m | awk '/Mem/ {print $2}'`
}

volume () {
  echo -n `amixer get Master | awk '/Mono/ {print $6=="[off]"?$6:$4}'`
}

battery () {
  cur=`cat /sys/class/power_supply/BAT0/energy_now`
  full=`cat /sys/class/power_supply/BAT0/energy_full`
  echo -n "$(($cur * 100 / $full))"
}

while true; do
  echo "%{c} [$(clock)] - [$(usedmem)/$(totalmem)M] - $(volume) - [$(battery)%]"
  sleep 15
done
