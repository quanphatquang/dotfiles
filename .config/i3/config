#################################################################
## Startup settings                                            ##
#################################################################

# set background color
exec --no-startup-id xsetroot -solid "#f5f5f5"

# set dual monitor layout
# exec --no-startup-id xrandr --output eDP1 --mode 1366x768 --output HDMI1 --mode 1366x768 --above eDP1

# disable touchpad by default
exec --no-startup-id ~/.bin/toggle-touchpad.sh
# disable caps lock by default
exec --no-startup-id setxkbmap -option ctrl:nocaps

# start xflux at startup
exec --no-startup-id xflux -l 21 -g 105

# default tabbed layout mode for new containers
workspace_layout tabbed

# change screen brightness
# exec --no-startup-id xbacklight -set 20

# autohide mouse cursor after 2 seconds
exec --no-startup-id unclutter -idle 2

# Open a small terminal at startup
exec --no-startup-id urxvt -name urxvt_scratchpad
for_window [instance="urxvt_scratchpad"] floating enable, move scratchpad, scratchpad show, border pixel 1

#################################################################
## Behavior-related settings                                   ##
#################################################################

# disable focusing by mouse hover
focus_follows_mouse no

# Correct handling of floating dialogs
# https://wiki.archlinux.org/index.php/i3#Iconic_fonts_in_the_status_bar
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [title="Floating for YouTube™"] floating enable, sticky enable, border 1px

#################################################################
## UI-related settings                                         ##
#################################################################

# font for render window title
font pango: Hermit 7

# remove title and set 1px border for new windows
new_window pixel 1 px

# custom title format
for_window [class=".*"] title_format "%title"

# enable border and title for popup and dialog windows
for_window [window_role="pop-up"] border normal
for_window [window_role="task_dialog"] border normal

# window decorations
# class                 border  backgr. text    indicator child_border
client.focused          #657B83 #657B83 #ffffff #657B83   #657B83
client.focused_inactive #93A1A1 #93A1A1 #ffffff #93A1A1   #93A1A1
client.unfocused        #93A1A1 #93A1A1 #ffffff #93A1A1   #93A1A1
client.urgent           #CC342B #CC342B #ffffff #CC342B   #CC342B
client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c

client.background       #fafafa

#################################################################
## Key-related settings                                        ##
#################################################################

set $mod Mod4

# mouse+$mod to drag floating windows
floating_modifier $mod

# key binding to change window focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# key binding to move the focusing window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# key binding to switch split mode to horizontal
bindsym $mod+Mod1+Right split h

# key binding to switch split mode to vertical
bindsym $mod+Mod1+Down split v

# key binding to make/unmake the focusing window fullscreen
bindsym $mod+f fullscreen toggle

# key bniding to change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# key binding to toggle tiling/floating mode on the focusing window
bindsym $mod+Shift+space floating toggle

# key binding to focus the parent container
bindsym $mod+a focus parent

# key binding to focus the child container
bindsym $mod+z focus child

# key binding to switch to beetween workspaces
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# key binding to move the focusing container to another workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# key bindings to move workspaces to another output screen
bindsym $mod+Shift+Mod1+Up    move workspace to output up
bindsym $mod+Shift+Mod1+Down  move workspace to output down
bindsym $mod+Shift+Mod1+Left  move workspace to output left
bindsym $mod+Shift+Mod1+Right move workspace to output right

bindsym $mod+Shift+Mod1+k move workspace to output up
bindsym $mod+Shift+Mod1+j move workspace to output down
bindsym $mod+Shift+Mod1+h move workspace to output left
bindsym $mod+Shift+Mod1+l move workspace to output right

# toggle border
bindsym $mod+b border toggle

# key mappings for xflux
bindsym $mod+F5 exec --no-startup-id xflux -l 21 -g 105
bindsym $mod+F6 exec --no-startup-id killall xflux

# key binding to resize window (another way is $mod+right_mouse)
mode "resize"
{
        bindsym h resize shrink width 1px or 1ppt
        bindsym j resize grow height 1px or 1ppt
        bindsym k resize shrink height 1px or 1ppt
        bindsym l resize grow width 1px or 1ppt

        bindsym Left resize shrink width 1px or 1ppt
        bindsym Down resize grow height 1px or 1ppt
        bindsym Up resize shrink height 1px or 1ppt
        bindsym Right resize grow width 1px or 1ppt

        # ESC to exit "resize" mode
        bindsym Escape mode "default"
}

# key binding to kill focusing window
bindsym $mod+Shift+q kill

# key binding to start program launcher
bindsym $mod+Tab exec dmenu_run -fn 'Hermit:size=8:style:Bold' -nb '#e0e0e0' -nf '#373B41' -sb '#e0e0e0' -sf '#3971ED'

# key binding to enter "resize" mode
bindsym $mod+r mode "resize"

# key binding to stick a floating window
bindsym $mod+Shift+t sticky toggle

# key binding to reload the i3 configuration file
bindsym $mod+Shift+c reload

# key binding to restart i3 inplace
bindsym $mod+Shift+r restart

# key binding to lock screen
bindsym $mod+Pause exec i3lock --dpms --color=#FFFFFF
bindsym $mod+Escape exec i3lock --dpms --color=#FFFFFF

# key binding to open a terminal
bindsym $mod+grave exec i3-sensible-terminal -e "fish"

# key binding to exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'Do you really want to exit i3?' -b 'Yes, exit i3' 'i3-msg exit'"

# key binding to adjust audio volume
bindsym XF86AudioRaiseVolume exec "amixer -q sset Master,0 1+ unmute"
bindsym XF86AudioLowerVolume exec "amixer -q sset Master,0 1- unmute"
bindsym XF86AudioMute exec "amixer -q sset Master,0 toggle"

# key binding to adjust screen brightness
bindsym XF86MonBrightnessUp exec xbacklight -inc 3
bindsym XF86MonBrightnessDown exec xbacklight -dec 3

# key binding to take a screenshot
bindsym $mod+Print exec "import -window root ~/Downloads/Screenshot$(date +-%F-%H-%M-%S).png"

# key binding to toggle touchpad
bindsym Mod1+space exec ~/.bin/toggle-touchpad.sh

# key binding to toggle scratchpad
bindsym $mod+Shift+grave move scratchpad, scratchpad show
bindsym Mod1+grave scratchpad show

# i3 status bar settings
bar
{
    font pango: Awesome 7

    colors
    {
        background #e0e0e0
        statusline #373B41
        separator  #373B41

        #<colorclass>      <border> <background> <text>
        focused_workspace  #3971ed  #e0e0e0      #3971ED
        active_workspace   #e0e0e0  #e0e0e0      #373B41
        inactive_workspace #e0e0e0  #e0e0e0      #373B41
        urgent_workspace   #e0e0e0  #e0e0e0      #CC342B
    }

    position top
    status_command i3status
    tray_output primary

    # hide by default, $mod to show
    mode hide
    hidden_state hide
    modifier $mod

    # separator_symbol "  "
    separator_symbol " "
}
